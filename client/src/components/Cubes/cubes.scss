@import '../../styles/_colors.scss';

.cubes {
  position: fixed;
  bottom: 358px;
  left: -170px;

  &__column {
    position: absolute;

    &:first-child { z-index: 1; }

    $tx: 86px;
    $ty: 49px;
    @for $i from 0 through 2 {
      $n: $i + 2;
      &:nth-child(#{$n}) {
        z-index: $n;
        transform: translate($tx + $tx * $i, $ty + $ty * $i);
      }
    }
  }

  &__row {
    display: flex;
    justify-content: center;
    position: relative;
    transform-origin: 0 0;

    $b: 4;
    $ty: -74px;
    &:first-child { z-index: $b; }
    @for $i from 0 through 2 {
      &:nth-child(#{$i + 2}) {
        z-index: $b - ($i + 1);
        transform: translateY($ty + $ty * $i);
      }
    }
  }
}

.cube {
  $w: 172px;
  $h: 172px;
  width: $w;
  height: $h;
  position: relative;

  $b: 4;
  $tx: -87px;
  $ty: -48px;
  &:first-child { z-index: $b; }
  @for $i from 0 through 2 {
    &:nth-child(#{$i + 2}) {
      z-index: $b - ($i + 1);
      transform: translate($tx + $tx * $i, $ty + $ty * $i);
    }
  }

  .face {
    transform-origin: 0 0;
    position: absolute;
    width: 100px;
    height: 100px;

    &.front {
      $r: 30deg;
      $sk: $r;
      $sc: 0.864;
      transform: rotate(-$r) skewX(-$sk) translate(130px, 172px) scaleY($sc);
      background: map-get($colors, darkest-blue);

      .face__image-container {
        transform: scaleY(1 / $sc) skewX($sk) rotate($r);
      }
    }

    &.top {
      $r: 210deg;
      $sk: 30deg;
      $sc: 0.864;
      transform: rotate($r) skew(-$sk) translate(-200px, -60px) scaleY($sc);
      background: map-get($colors, blue);

      .face__image-container {
        transform: scaleY(1 / $sc) skew($sk) rotate(-$r);
      }
    }

    &.side {
      $r: 90deg;
      $sk: 30deg;
      $sc: 0.864;
      transform: rotate($r) skewX(-$sk) scaleY($sc) translate(68px, -131px);
      background: map-get($colors, dark-blue);

      .face__image-container {
        transform: scaleY(1 / $sc) skew($sk) rotate(-$r);
      }
    }

    &.face--transparent {
      opacity: 1;
      animation: disappear 1000ms ease 400ms forwards;
    }

    &.face--img {
      overflow: hidden;
    }

    &__image-container {
      width: 200%;
      height: 200%;
      display: flex;
      align-items: center;
      justify-content: center;
      position: absolute;
      top: -50%;
      left: -50%;
      z-index: -1;
    }

    &__image {
      max-width: 84%;
    }
  }
}

@keyframes disappear {
  to { opacity: 0}
}
